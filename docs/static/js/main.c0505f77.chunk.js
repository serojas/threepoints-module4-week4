(this.webpackJsonpweek4=this.webpackJsonpweek4||[]).push([[0],{37:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(29),r=a.n(s),i=(a(37),a(6)),o=a(2),l=a(30),d=a.n(l).a.create({baseURL:"https://three-points.herokuapp.com/api",withCredentials:!0});d.interceptors.response.use((function(e){return e.data}),(function(e){401===(null===e||void 0===e?void 0:e.response.status)&&(localStorage.removeItem("userId"),window.location.replace("/login"))}));var u=a(31),j=a(1);var b=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=(a[0],a[1]),s=Object(n.useState)(0),r=Object(i.a)(s,2),o=r[0],l=r[1],d=Object(n.useState)(0),b=Object(i.a)(d,2),m=b[0],h=b[1];return Object(n.useEffect)((function(){return l(e.delay),h(setTimeout((function(){return c(!0)}),o)),function(){clearTimeout(m)}}),[]),Object(j.jsx)("div",{style:{position:"fixed",top:"60%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(j.jsx)(u.BeatLoader,{loading:e.loading,size:"50px",margin:"2px"})})};a(85);var m=function(e){var t=e.setError,a=e.profile,c=e.updateProfile,s=e.history,r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1],m=Object(n.useState)(""),h=Object(i.a)(m,2),f=h[0],p=h[1],O=Object(n.useState)(!1),x=Object(i.a)(O,2),v=x[0],g=x[1],y=!0,N={width:"100%",border:"0 !important"};function w(e){e.preventDefault(),g(!0),S();var n={username:document.getElementById("input_username").value,password:document.getElementById("input_password").value};(function(e,t){return d.post("/login",{username:e,password:t})})(n.username,n.password).then((function(e){c(e),localStorage.setItem("userId",a.id),s.push("/"),g(!1)})).catch((function(e){t("Invalid username or password"),u(""),p(""),g(!1)}))}function S(){document.getElementById("input_username").disabled=!0,document.getElementById("input_password").disabled=!0,document.getElementById("button_login").disabled=!0}return Object(n.useEffect)((function(){var e=localStorage.getItem("userId");"undefined"!==e&&void 0!==e&&null!==e&&""!==e.trim()&&function(e){y&&(S(),function(e){return d.get("/users/".concat(e))}(e).then((function(e){c(e),window.localStorage.setItem("userId",a.id),s.push("/"),y=!1})).catch((function(e){t("Error at getting user information"),y=!1})))}(e)}),[]),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"login-container",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"form-floating pb-3",children:[Object(j.jsx)("input",{type:"text",className:"form-control",id:"input_username",name:"username",style:N}),Object(j.jsx)("label",{htmlFor:"input_username",className:"form-label",value:l,onChange:function(e){u(e.target.value)},children:"Username:"})]}),Object(j.jsxs)("div",{className:"form-floating pb-3",children:[Object(j.jsx)("input",{type:"password",className:"form-control",id:"input_password",name:"password",style:N}),Object(j.jsx)("label",{htmlFor:"input_password",className:"form-label",value:f,onChange:function(e){p(e.target.value)},children:"Password:"})]}),Object(j.jsx)("button",{id:"button_login",type:"button",className:"btn btn-dark button-login",style:N,onClick:function(e){return w(e)},children:"Login"})]})}),v?Object(j.jsx)(b,{loading:v,delay:1500}):""]})};a(86);var h=function(e){var t=e.name,a=e.username,n=e.avatar,c=e.description;return e.history,Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"profile-header-container",children:[Object(j.jsx)("div",{className:"profile-header-img",children:Object(j.jsx)("img",{className:"img-circle",src:n,alt:"Profile"})}),Object(j.jsx)("div",{className:"name-style",children:Object(j.jsx)("h4",{children:t})}),Object(j.jsx)("div",{className:"username-style",children:Object(j.jsx)("h5",{children:"@".concat(a)})}),Object(j.jsxs)("div",{className:"rank-label-container",style:{position:"fixed",top:"35%",left:"50%",transform:"translate(-50%, -50%)"},children:[Object(j.jsx)("span",{className:"label label-default rank-label",children:c}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"/login",className:"label label-default rank-label",onClick:function(){d.post("/logout").then((function(e){localStorage.removeItem("userId"),window.location.replace("/login")})).catch((function(e){console.log("Error at logout")}))},children:"Logout"})})]})]})})})},f=a(12);var p=function(e){var t={display:"none"},a={display:"none",color:"white",paddingLeft:"1em"},n={color:"white"};return e.enableNavBarButtons?(t.display="block",a.display="inline",a.color="white",a.paddingLeft="1em"):(t.display="none",a.display="none"),Object(j.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-dark",style:{width:"100%"},children:Object(j.jsxs)("div",{className:"container-md navbar-title",children:[Object(j.jsxs)(f.b,{className:"navbar-brand",to:"/",children:[Object(j.jsx)("i",{className:"fas fa-bolt",style:n}),Object(j.jsx)("span",{style:a,children:"  Three Pics  "})]}),Object(j.jsx)(f.b,{to:"/profile",children:Object(j.jsx)("i",{className:"fa fa-user-circle fa-2x",style:n})})]})})},O=function(e){var t=e.setError,a=e.error;return Object(j.jsxs)("div",{id:"alert_danger",className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[Object(j.jsx)("strong",{children:a}),Object(j.jsx)("button",{id:"btn_close_alert",type:"button",className:"btn-close","data-dismiss":"alert","aria-label":"Close",onClick:function(){t("")},children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})},x=function(e,t){return"FIND_POST_BY_SEARCH"===t.type?void 0===t.payload.searchFilter||null===t.payload.searchFilter||""===t.payload.searchFilter.trim()?t.payload.data:t.payload.data.filter((function(e){return e.text.toUpperCase().includes(t.payload.searchFilter.toUpperCase())})):e};var v=function(e){return Object(j.jsx)("div",{className:"col- col-sm-3 col-md-3 col-lg-3",style:{paddingTop:"2em"},children:Object(j.jsxs)("div",{className:"card",style:{width:"100%"},children:[Object(j.jsx)("img",{src:e.image,className:"card-img-top",alt:"Post"}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-6",children:Object(j.jsx)("p",{className:"p-time",children:e.createdAt})}),Object(j.jsx)("div",{className:"col-6 post-like",children:Object(j.jsxs)("a",{href:"/#",id:"btn_like_1",className:"btn btn-outline-danger",onClick:function(){var t;(t=e.id,d.post("/posts/".concat(t,"/like"))).then((function(t){e.fetchData()})).catch((function(e){console.log("Error at giving like>>",e)}))},children:[Object(j.jsx)("i",{id:"i_like_1",className:"fa fa-heart"})," ",e.likes," "]})})]}),Object(j.jsx)("h5",{className:"card-title",children:"@".concat(e.author)}),Object(j.jsxs)("p",{className:"card-text",children:["".concat(e.text.substring(0,50),"...")," "]}),Object(j.jsxs)("a",{href:"/#",children:[Object(j.jsx)("i",{className:"far fa-comment-alt"})," Comments"]})]})]})})};var g=function(e){var t=e.posts;return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"row no-padding",children:Object(j.jsx)("div",{className:"col- col-sm-12 col-md-12 col-lg-12",children:Object(j.jsx)("div",{id:"div_posts",className:"row",children:t})})})})};var y=function(e){var t=e.findPostBySearch;return Object(j.jsx)("div",{className:"input-group rounded",style:{width:"100%"},children:Object(j.jsx)("input",{type:"search",className:"form-control rounded",placeholder:"Search","aria-label":"Search","aria-describedby":"search-addon",onChange:function(e){t(e.target.value)}})})};var N=function(e){var t=e.history,a=Object(n.useState)([]),c=Object(i.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),u=l[0],m=l[1],h=Object(n.useState)(!1),f=Object(i.a)(h,2),p=f[0],O=f[1];Object(n.useEffect)((function(){return O(!0),k(),function(){r([])}}),[]);var N=Object(n.useReducer)(x,u),w=Object(i.a)(N,2),S=w[0],_=w[1];function k(){d.get("/posts").then((function(e){m(e),r(I(e)),O(!1)})).catch((function(e){O(!1)}))}function I(e){return e.map((function(e,a){return Object(j.jsx)(v,{id:e.id,author:e.author.username,text:e.text,image:e.image,createdAt:e.createdAt,likes:e.likes,position:a,history:t,fetchData:k},a)}))}return Object(j.jsxs)("div",{children:[p?Object(j.jsx)(b,{loading:p,delay:1500}):"",Object(j.jsx)(y,{findPostBySearch:function(e){_(function(e){return{type:"FIND_POST_BY_SEARCH",payload:{searchFilter:e.searchFilter,data:e.data}}}({searchFilter:e,data:u})),r(I(S))}}),Object(j.jsx)(g,{posts:s})]})};a(93);var w=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({}),r=Object(i.a)(s,2),l=r[0],d=r[1],u=Object(o.f)();function b(e){d(e)}return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(p,{}),void 0===a||null===a||""===a.trim()?"":Object(j.jsx)(O,{setError:c,error:a}),Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/login",component:function(){return Object(j.jsx)(m,{setError:c,profile:l,updateProfile:b,history:u})}}),Object(j.jsx)(o.a,{exact:!0,path:"/",component:function(){return Object(j.jsx)(N,{history:u})}}),Object(j.jsx)(o.a,{exact:!0,path:"/profile",component:function(){return Object(j.jsx)(h,{name:l.name,username:l.username,avatar:l.avatar,description:l.bio,history:u})}})]})]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,95)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(f.a,{children:Object(j.jsx)(w,{})})}),document.getElementById("root")),S()}},[[94,1,2]]]);
//# sourceMappingURL=main.c0505f77.chunk.js.map